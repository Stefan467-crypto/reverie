<!DOCTYPE html>
<html lang="ro">

<head>
  <meta charset="UTF-8">
  <title>Autentificare — Reverie</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="shortcut icon" href="https://reverie.md/wp-content/uploads/2017/08/cropped-ReverieIcon512.png" />
  <link
    href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,700;0,900;1,700&family=DM+Sans:wght@300;400;500&display=swap"
    rel="stylesheet">

  <style>
    *,
    *::before,
    *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    :root {
      --red: #b71c1c;
      --red-deep: #7f0000;
      --red-bright: #ef5350;
      --cream: #fdf8f3;
      --ink: #1a0a0a;
      --muted: #8a7070;
      --border: rgba(183, 28, 28, 0.13);
    }

    html,
    body {
      height: 100%;
      font-family: 'DM Sans', sans-serif;
      background: var(--cream);
      overflow: hidden;
    }


    .stage {
      display: grid;
      grid-template-columns: 1fr 1fr;
      height: 100vh;
    }


    .left {
      position: relative;
      background: var(--ink);
      overflow: hidden;
      display: flex;
      flex-direction: column;
      padding: 44px 48px;
      animation: fadeIn 0.8s ease both;
    }

    @keyframes fadeIn {
      from {
        opacity: 0
      }

      to {
        opacity: 1
      }
    }


    .bg-svg {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      z-index: 0;
    }

    .left>* {
      position: relative;
      z-index: 2;
    }


    .logo {
      display: inline-flex;
      align-items: center;
      gap: 12px;
      text-decoration: none;
    }

    .logo-mark {
      width: 38px;
      height: 38px;
      background: var(--red);
      border-radius: 9px;
      display: grid;
      place-items: center;
      flex-shrink: 0;
    }

    .logo-text {
      font-family: 'Playfair Display', serif;
      font-size: 1.2rem;
      font-weight: 700;
      color: #fff;
      letter-spacing: 0.1em;
    }


    .hero-block {
      margin-top: auto;
      padding-bottom: 8px;
    }

    .overline {
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 0.7rem;
      font-weight: 500;
      letter-spacing: 0.22em;
      text-transform: uppercase;
      color: var(--red-bright);
      margin-bottom: 20px;
    }

    .overline::before {
      content: '';
      width: 24px;
      height: 1px;
      background: var(--red-bright);
    }

    .hero-title {
      font-family: 'Playfair Display', serif;
      font-size: clamp(2rem, 3.2vw, 3.2rem);
      font-weight: 900;
      line-height: 1.05;
      color: #fff;
      margin-bottom: 18px;
    }

    .hero-title em {
      font-style: italic;
      color: var(--red-bright);
    }

    .hero-sub {
      font-size: 0.88rem;
      color: rgba(255, 255, 255, 0.45);
      line-height: 1.75;
      max-width: 32ch;
    }

    .stats {
      display: flex;
      gap: 28px;
      margin-top: 36px;
      padding-top: 28px;
      border-top: 1px solid rgba(255, 255, 255, 0.07);
    }

    .stat-num {
      font-family: 'Playfair Display', serif;
      font-size: 1.5rem;
      font-weight: 700;
      color: #fff;
      line-height: 1;
    }

    .stat-label {
      font-size: 0.72rem;
      color: rgba(255, 255, 255, 0.35);
      margin-top: 5px;
      letter-spacing: 0.03em;
    }


    .right {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      padding: 56px 60px;
      background: var(--cream);
      position: relative;
      overflow: hidden;
    }


    .ring {
      position: absolute;
      border-radius: 50%;
      border: 1px solid var(--border);
      pointer-events: none;
    }

    .ring-1 {
      width: 340px;
      height: 340px;
      bottom: -130px;
      right: -130px;
    }

    .ring-2 {
      width: 220px;
      height: 220px;
      bottom: -70px;
      right: -70px;
    }

    .ring-3 {
      width: 120px;
      height: 120px;
      bottom: -20px;
      right: -20px;
    }

    .ring-4 {
      width: 180px;
      height: 180px;
      top: -80px;
      left: -80px;
      opacity: 0.5;
    }

    .form-wrap {
      width: 100%;
      max-width: 360px;
      position: relative;
      z-index: 2;
      animation: slideUp 0.55s cubic-bezier(.16, 1, .3, 1) 0.1s both;
    }

    @keyframes slideUp {
      from {
        opacity: 0;
        transform: translateY(22px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }


    .back-link {
      position: absolute;
      top: 24px;
      left: 24px;
      display: inline-flex;
      align-items: center;
      gap: 7px;
      font-size: 0.8rem;
      font-weight: 500;
      color: var(--muted);
      text-decoration: none;
      transition: color 0.2s;
      z-index: 10;
    }

    .back-link:hover {
      color: var(--red);
    }

    .back-link svg {
      width: 15px;
      height: 15px;
      transition: transform 0.2s;
    }

    .back-link:hover svg {
      transform: translateX(-3px);
    }


    .form-eyebrow {
      font-size: 0.68rem;
      font-weight: 500;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      color: var(--red);
      margin-bottom: 10px;
    }

    .form-title {
      font-family: 'Playfair Display', serif;
      font-size: 2rem;
      font-weight: 700;
      color: var(--ink);
      line-height: 1.1;
      margin-bottom: 6px;
    }

    .form-sub {
      font-size: 0.85rem;
      color: var(--muted);
      margin-bottom: 34px;
      line-height: 1.6;
    }


    .field {
      margin-bottom: 18px;
    }

    .field label {
      display: block;
      font-size: 0.72rem;
      font-weight: 500;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: var(--ink);
      opacity: 0.65;
      margin-bottom: 7px;
    }

    .input-wrap {
      position: relative;
    }

    .input-icon {
      position: absolute;
      left: 14px;
      top: 50%;
      transform: translateY(-50%);
      width: 15px;
      height: 15px;
      color: #ccc;
      pointer-events: none;
      transition: color 0.2s;
    }

    .field input {
      width: 100%;
      padding: 12px 14px 12px 40px;
      background: #fff;
      border: 1.5px solid rgba(183, 28, 28, 0.14);
      border-radius: 9px;
      font-family: 'DM Sans', sans-serif;
      font-size: 0.93rem;
      color: var(--ink);
      outline: none;
      transition: border-color 0.2s, box-shadow 0.2s;
    }

    .field input::placeholder {
      color: #ccc;
    }

    .field input:focus {
      border-color: var(--red);
      box-shadow: 0 0 0 3px rgba(183, 28, 28, 0.07);
    }

    .field input:focus~.input-icon {
      color: var(--red);
    }


    .btn-login {
      width: 100%;
      margin-top: 6px;
      padding: 13px;
      background: var(--red);
      color: #fff;
      border: none;
      border-radius: 9px;
      font-family: 'DM Sans', sans-serif;
      font-size: 0.93rem;
      font-weight: 600;
      letter-spacing: 0.05em;
      cursor: pointer;
      position: relative;
      overflow: hidden;
      transition: background 0.18s, transform 0.18s, box-shadow 0.18s;
    }

    .btn-login::after {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), transparent);
      pointer-events: none;
    }

    .btn-login:hover:not(:disabled) {
      background: var(--red-deep);
      transform: translateY(-2px);
      box-shadow: 0 10px 28px rgba(183, 28, 28, 0.28);
    }

    .btn-login:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }

    .error-msg {
      margin-top: 14px;
      padding: 11px 14px;
      border-radius: 8px;
      background: rgba(183, 28, 28, 0.07);
      border-left: 3px solid var(--red);
      color: var(--red);
      font-size: 0.83rem;
      display: none;
      animation: shake 0.3s ease;
    }

    @keyframes shake {

      0%,
      100% {
        transform: translateX(0);
      }

      25% {
        transform: translateX(-5px);
      }

      75% {
        transform: translateX(5px);
      }
    }


    .form-note {
      margin-top: 24px;
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 0.75rem;
      color: #bbb;
    }

    .form-note::before,
    .form-note::after {
      content: '';
      flex: 1;
      height: 1px;
      background: var(--border);
    }

    @media (max-width: 900px) {

      html,
      body {
        overflow-y: auto;
      }

      .stage {
        grid-template-columns: 1fr;
        grid-template-rows: auto 1fr;
        height: auto;
        min-height: 100vh;
      }

      .left {
        padding: 32px 28px 36px;
        min-height: auto;
      }

      .hero-title {
        font-size: 1.9rem;
      }

      .stats {
        gap: 20px;
        margin-top: 24px;
        padding-top: 20px;
      }

      .right {
        padding: 40px 28px 52px;
        justify-content: flex-start;
      }

      .back-link {
        top: 14px;
        left: 14px;
      }
    }

    @media (max-width: 420px) {
      .left {
        padding: 24px 20px 28px;
      }

      .right {
        padding: 32px 20px 44px;
      }

      .form-title {
        font-size: 1.65rem;
      }

      .stats {
        flex-wrap: wrap;
        gap: 16px 20px;
      }
    }
  </style>
</head>

<body>

  <div class="stage">


    <div class="left">


      <svg class="bg-svg" viewBox="0 0 580 900" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice">
        <defs>
          <radialGradient id="g1" cx="75%" cy="15%" r="55%">
            <stop offset="0%" stop-color="#b71c1c" stop-opacity="0.4" />
            <stop offset="100%" stop-color="#b71c1c" stop-opacity="0" />
          </radialGradient>
          <radialGradient id="g2" cx="15%" cy="88%" r="40%">
            <stop offset="0%" stop-color="#ef5350" stop-opacity="0.2" />
            <stop offset="100%" stop-color="#ef5350" stop-opacity="0" />
          </radialGradient>
        </defs>


        <rect width="580" height="900" fill="url(#g1)" />
        <rect width="580" height="900" fill="url(#g2)" />


        <g stroke="rgba(255,255,255,0.03)" stroke-width="1" fill="none">
          <line x1="-50" y1="180" x2="630" y2="480" />
          <line x1="-50" y1="320" x2="630" y2="620" />
          <line x1="-50" y1="460" x2="630" y2="760" />
          <line x1="580" y1="80" x2="-50" y2="560" />
          <line x1="580" y1="220" x2="-50" y2="700" />
        </g>


        <circle cx="510" cy="148" r="230" fill="none" stroke="rgba(183,28,28,0.2)" stroke-width="1" />
        <circle cx="510" cy="148" r="175" fill="none" stroke="rgba(183,28,28,0.12)" stroke-width="1" />
        <circle cx="510" cy="148" r="90" fill="rgba(183,28,28,0.1)" />
        <circle cx="510" cy="148" r="40" fill="rgba(183,28,28,0.2)" />


        <g transform="translate(40, 500)" fill="rgba(255,255,255,0.04)">

          <rect x="60" y="80" width="180" height="220" />

          <polygon points="150,20 240,80 60,80" />

          <rect x="125" y="230" width="50" height="70" fill="rgba(0,0,0,0.15)" />

          <rect x="80" y="110" width="40" height="35" fill="rgba(239,83,80,0.15)" />
          <rect x="180" y="110" width="40" height="35" fill="rgba(239,83,80,0.15)" />
          <rect x="80" y="175" width="40" height="35" fill="rgba(239,83,80,0.10)" />
          <rect x="180" y="175" width="40" height="35" fill="rgba(239,83,80,0.10)" />

          <rect x="255" y="140" width="100" height="160" />
          <rect x="265" y="160" width="30" height="28" fill="rgba(239,83,80,0.10)" />
          <rect x="315" y="160" width="30" height="28" fill="rgba(239,83,80,0.10)" />
          <rect x="265" y="210" width="30" height="28" fill="rgba(239,83,80,0.08)" />
          <rect x="315" y="210" width="30" height="28" fill="rgba(239,83,80,0.08)" />

          <rect x="0" y="300" width="400" height="2" fill="rgba(255,255,255,0.06)" />
        </g>

        <g fill="rgba(239,83,80,0.55)">
          <circle cx="72" cy="710" r="3.5" />
          <circle cx="90" cy="728" r="2.2" />
          <circle cx="110" cy="715" r="1.8" />
          <circle cx="60" cy="738" r="1.5" />
          <circle cx="100" cy="742" r="1.2" />
        </g>


        <line x1="44" y1="840" x2="290" y2="840" stroke="rgba(255,255,255,0.05)" stroke-width="1" />
      </svg>


      <a href="../index.html" class="logo">
        <div class="logo-mark">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="white">
            <path d="M12 3l9 8h-3v8h-4v-5H10v5H6v-8H3l9-8z" />
          </svg>
        </div>
        <span class="logo-text">REVERIE</span>
      </a>


      <div class="hero-block">
        <div class="overline">Agenție imobiliară</div>
        <h1 class="hero-title">
          Găsește<br>
          <em>acasă</em><br>
          cu noi.
        </h1>
        <p class="hero-sub">
          Partenerul tău de încredere în căutarea proprietății perfecte — rapid, transparent și dedicat.
        </p>

        <div class="stats">
          <div>
            <div class="stat-num">15+</div>
            <div class="stat-label">Ani experiență</div>
          </div>

          <div>
            <div class="stat-num">98%</div>
            <div class="stat-label">Satisfacție</div>
          </div>
        </div>
      </div>

    </div>


    <div class="right">

      <div class="ring ring-1"></div>
      <div class="ring ring-2"></div>
      <div class="ring ring-3"></div>
      <div class="ring ring-4"></div>

      <a class="back-link" href="../index.html">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
          stroke-linejoin="round">
          <path d="M19 12H5M12 5l-7 7 7 7" />
        </svg>
        Înapoi
      </a>

      <div class="form-wrap">

        <h2 class="form-title">Bine ai<br>revenit.</h2>
        <p class="form-sub">Introdu datele contului pentru a continua.</p>

        <div class="field">
          <label for="email">Email</label>
          <div class="input-wrap">
            <input type="email" id="email" placeholder="agent@reverie.md" autocomplete="username">
            <svg class="input-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"
              stroke-linecap="round" stroke-linejoin="round">
              <rect x="2" y="4" width="20" height="16" rx="2" />
              <path d="M2 7l10 7 10-7" />
            </svg>
          </div>
        </div>

        <div class="field">
          <label for="password">Parolă</label>
          <div class="input-wrap">
            <input type="password" id="password" placeholder="••••••••" autocomplete="current-password">
            <svg class="input-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"
              stroke-linecap="round" stroke-linejoin="round">
              <rect x="3" y="11" width="18" height="11" rx="2" />
              <path d="M7 11V7a5 5 0 0 1 10 0v4" />
            </svg>
          </div>
        </div>

        <button class="btn-login" id="loginBtn">Intră în cont</button>

        <div class="error-msg" id="errorMsg"></div>

        <div class="form-note">acces exclusiv agenți</div>
      </div>

    </div>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-app.js";
    import { getAuth, signInWithEmailAndPassword, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-auth.js";
    import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyCqXpk1NuWfiq6QjHViK80HLl9zwFVGNGo",
      authDomain: "reverie-c861c.firebaseapp.com",
      projectId: "reverie-c861c",
      storageBucket: "reverie-c861c.firebasestorage.app",
      messagingSenderId: "122254003952",
      appId: "1:122254003952:web:67dea6de1f5eb97a9b7c35",
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);

    const loginBtn = document.getElementById("loginBtn");
    const errorMsg = document.getElementById("errorMsg");
    const emailEl = document.getElementById("email");
    const passEl = document.getElementById("password");

    function showError(text) {
      errorMsg.textContent = text;
      errorMsg.style.display = "block";
      errorMsg.style.animation = "none";
      requestAnimationFrame(() => { errorMsg.style.animation = "shake 0.3s ease"; });
    }

    function hideError() { errorMsg.textContent = ""; errorMsg.style.display = "none"; }

    function setLoading(v) {
      loginBtn.disabled = v;
      loginBtn.textContent = v ? "Se autentifică..." : "Intră în cont";
    }

    async function redirectByRole(uid) {
      const snap = await getDoc(doc(db, "users", uid));
      if (!snap.exists()) { showError("Lipsește profilul din Firestore."); return; }
      sessionStorage.setItem("reverie_role", (snap.data().role || "").toLowerCase());
      sessionStorage.setItem("reverie_uid", uid);
      window.location.href = "../pages/dashboard.html";
    }

    async function doLogin() {
      hideError();
      const email = (emailEl.value || "").trim();
      const pass = passEl.value || "";
      if (!email || !pass) { showError("Completează email și parolă."); return; }
      try {
        setLoading(true);
        const c = await signInWithEmailAndPassword(auth, email, pass);
        await redirectByRole(c.user.uid);
      } catch { showError("Email sau parolă incorectă."); }
      finally { setLoading(false); }
    }

    loginBtn.addEventListener("click", doLogin);
    document.addEventListener("keydown", e => { if (e.key === "Enter") doLogin(); });
    onAuthStateChanged(auth, async u => { if (u) try { await redirectByRole(u.uid); } catch { } });
  </script>

</body>

</html>